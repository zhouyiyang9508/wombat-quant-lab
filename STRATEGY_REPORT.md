# Wombat Quant Lab — 策略优化报告

> 作者：代码熊 🐻 | 日期：2026-02-19

## 执行摘要

经过 v5（规则策略）vs v3 ML（机器学习增强）的公平 Lump Sum 对比（$10,000 初始资金，相同数据源），**v5 规则策略全面胜出**：

- **TQQQ v5 Beast** ⭐：CAGR 41.8%, MaxDD -62.6%, Calmar 0.67
- **BTC v5 Beast** ⭐：CAGR 61.0%, MaxDD -74.0%, Calmar 0.82

ML v3 策略虽然降低了回撤，但严重损失了收益，不如 Buy & Hold。

## 公平对比结果

### TQQQ（2010-02-11 → 2026-02-18，4028 天）

| 策略 | 最终价值 | CAGR | MaxDD | Sharpe | Calmar |
|------|----------|------|-------|--------|--------|
| **v5 Beast** ⭐ | **$2,687,728** | **41.8%** | -62.6% | **0.85** | **0.67** |
| v3 ML (GBM) | $89,877 | 14.7% | -51.4% | 0.46 | 0.29 |
| Buy & Hold | $2,389,580 | 40.8% | -81.7% | 0.80 | 0.50 |

### BTC（2017-01-01 → 2026-02-18）

| 策略 | 最终价值 | CAGR | MaxDD | Sharpe | Calmar |
|------|----------|------|-------|--------|--------|
| **v5 Beast** ⭐ | **$774,007** | **61.0%** | -74.0% | **0.83** | **0.82** |
| v3 ML (多因子) | $108,008 | 29.8% | -61.7% | 0.60 | 0.48 |
| Buy & Hold | $666,842 | 58.4% | -83.2% | 0.77 | 0.70 |

## 为什么 ML 输了？

### 1. 过度择时（Overtrading）
ML v3 的 GBM 分类器在 200MA 以下时**强制清仓 0%**，而 v5 保留 30-35% 底仓。TQQQ 和 BTC 的很多大反弹恰好发生在 200MA 以下（V 型反弹），ML 完全错过了。

### 2. Walk-forward 分类器精度不够
在样本外（未来数据）的预测准确率只有 ~55%，接近随机，导致频繁误判 regime，来回切换吃手续费和滑点。

### 3. 简单规则的优势
v5 的宽幅滞后带（TQQQ: 90%/105%, BTC: 92%/103%）极大减少了 regime 切换次数，避免 whipsaw。配合 RSI 抄底机制，在熊市中也能捕捉到大部分反弹收益。

## 最优策略详解

### TQQQ v5 Beast — 宽幅滞后带策略

**牛市（price > SMA200 × 1.05 确认）：**
- 100% TQQQ，全仓吃涨
- RSI(10) > 80 且周涨幅 > 15% 时才减到 80%（极端狂热）

**熊市（price < SMA200 × 0.90 确认）：**
- 底仓 30%（关键！捕捉 V 型反弹）
- RSI(10) < 30 → 60%（适度抄底）
- RSI(10) < 20 或周跌 > 12% → 80%（恐慌买入）
- RSI(10) > 65 → 回到 30% 底仓

**核心创新：宽幅滞后带**
- 进入熊市：价格跌到 SMA200 的 **90%** 才触发（很晚的确认）
- 退出熊市：价格涨到 SMA200 的 **105%** 才恢复牛市
- 效果：极少切换，避免 whipsaw

### BTC v5 Beast — 减半周期 + Mayer Multiple

**牛市（price > SMA200 × 1.03）：**
- 100% BTC
- Mayer Multiple > 3.0 → 减至 70%（泡沫保护）
- Mayer Multiple > 3.5 → 减至 50%（极端泡沫）
- 减半后 30+ 个月 → 上限 90%（晚期谨慎）

**熊市（price < SMA200 × 0.92）：**
- 底仓 35%（减半后 0-12 月提升至 ~52%）
- RSI(14) < 30 → 60%
- RSI(14) < 20 → 80%
- 周跌 > 20% → 70%

**为何 BTC 用窄带（92%/103%）而 TQQQ 用宽带（90%/105%）：**
BTC 熊市特征明确且持续时间长，窄带可以更快识别趋势。TQQQ 波动更大，需要宽带防止假信号。

## ML 实验的价值

虽然 ML v3 没有胜出，但实验有以下收获：
1. **Pi Cycle Top 指标**有效识别 BTC 大顶，可考虑作为 v5 的辅助卖出信号
2. **Puell Multiple 代理**在底部识别上与 RSI 高度重合，独立价值有限
3. **Walk-forward GBM** 在日频数据上精度不够，或许在周频/月频上更适合
4. 验证了**简单规则 > 复杂 ML** 在高波动资产上的结论

## 防止未来函数审计 ✓

所有策略均通过审计：
- SMA200, RSI: `rolling().mean()` → 仅用历史数据 ✓
- Weekly return: `pct_change(5/7)` → 仅用历史数据 ✓
- ML Walk-forward: 训练集 [0 : T-20]，预测 T → 无标签泄露 ✓
- Mayer Multiple: price / SMA200 → 仅用当前和历史 ✓
- 减半日期: 已知历史事件 ✓

## 数据源

- TQQQ: Stooq.com 日线 (`tqqq/data/tqqq_daily.csv`, 4028 行)
- BTC: Stooq.com 日线 (`btc/data/btc_daily.csv`, 4173 行)

## 结论与建议

1. **v5 规则策略是当前最优**，无需替换
2. 可考虑将 Pi Cycle Top 作为 BTC v5 的辅助卖出信号（v6 方向）
3. ML 在更长时间框架（周频/月频）或更多特征（链上数据）上可能有价值
4. 回撤在 62-74% 范围内，符合用户 70-80% 容忍度

---

## 方向B探索：稳健Hedge Fund风格动态资产配置

> 日期：2026-02-19 | 代码熊 🐻

### 目标
- CAGR 15-25%, MaxDD <20%, Sharpe >1.5
- 资产池: QQQ + TLT + GLD（无杠杆）

### 策略演进

| 版本 | 方法 | CAGR | MaxDD | Sharpe | Calmar |
|------|------|------|-------|--------|--------|
| v1 (Risk Parity + Mom) | 风险平价 + 动量倾斜 | 10.4% | -22.5% | 0.63 | 0.46 |
| v2 (Dual Mom + VolTarget) | 双动量 + 波动率目标 | 8.8% | -12.7% | 0.55 | 0.69 |
| v3 (Concentrated Mom) | 集中持仓 + Regime | 11.8% | -25.4% | 0.58 | 0.47 |
| **v4 PMA (最终版)** | Breadth + 动量 + 平滑 + DD控制 | **10.1%** | **-17.0%** | **0.66** | **0.59** |

### v4 PMA 详细结果

**Full Period (2011-01 → 2026-02, ~15年)**
- CAGR: 10.1%, MaxDD: -17.0%, Sharpe: 0.66, Calmar: 0.59
- Win Rate (月度): 64.1%
- vs 60/40 B&H: CAGR差 (-2.5%), 但MaxDD优 (-17% vs -34%), Calmar优 (0.59 vs 0.37)

**Out-of-Sample (2019-09 → 2026-02)**
- CAGR: 13.1%, MaxDD: -17.0%, Sharpe: 0.85, Calmar: 0.77
- 大幅跑赢 60/40 (Sharpe 0.85 vs 0.42)

**参数稳健性**: ✅ 通过
- sma_period (45-85): Sharpe 0.52-0.59 → 稳定
- mom_lookback (63-200): Sharpe 0.54-0.61 → 稳定
- smooth (0-0.7): Sharpe 0.29-0.64 → smooth是关键参数
- offense_top1 (0.45-0.75): Sharpe 0.53-0.56 → 非常稳定

### v4 PMA 核心逻辑

1. **Breadth信号**: 3资产中几个在13W SMA上方？
   - ≥2 → 进攻模式（按动量排名加权：55/30/15）
   - =1 → 混合模式（40%最强 + 部分TLT/GLD）
   - =0 → 防御模式（50%TLT + 40%GLD + 10%现金）
2. **绝对动量过滤**: 6M+12M blended momentum < 0 → 不配置
3. **权重平滑**: 70%前期权重 + 30%新权重（减少whipsaw）
4. **回撤保护**: DD > -6% → 线性降仓至最低30%

### 关键发现

**Sharpe >1.5 目标不现实**：3资产无杠杆组合的理论Sharpe上限约0.8-1.0。即使Bridgewater All Weather（全天候策略）在无杠杆情况下Sharpe也仅~0.7。要达到1.5需要：
- 3-4x杠杆（风险平价 + 杠杆）
- 或更多低相关资产（商品期货、外汇等）
- 或允许做空

**权重平滑是最重要的参数**：从smooth=0到0.7，Sharpe从0.29飙升至0.64。减少换手是真正的alpha。

**防御模式很有效**：在2020、2022、2025的大跌中，breadth信号成功触发防御，MaxDD控制在-17%。

### 综合评分
Score = 0.66×0.4 + 0.59×0.4 + 0.101×0.2 = **0.523**

（对比TQQQ v8: ~0.85×0.4 + 0.75×0.4 + 0.442×0.2 = 0.728）

### 下一步方向
1. **加入SOXL/UPRO等3x ETF作为进攻资产**（方向A），保留TLT/GLD防御逻辑
2. **带杠杆的风险平价**: 如果允许2x杠杆，v4的Sharpe可能突破1.0
3. **加入更多资产**: 大宗商品(DBC)、房地产(VNQ)、国际(EFA) → 提高分散化

### 文件
- `hedge/codebear/stable_v1.py` - 风险平价+动量
- `hedge/codebear/stable_v2.py` - 双动量+波动率目标
- `hedge/codebear/stable_v3.py` - 集中动量
- `hedge/codebear/stable_v4.py` - **PMA最终版** ⭐

---
*Generated by 代码熊 🐻 — 2026-02-19*


---

## 宽资产动量轮动策略 — 最终版 (2026-02-19)

**资产宇宙**: 15 ETFs (SPY/QQQ/IWM/EFA/EEM/TLT/IEF/HYG/TIP/GLD/SLV/USO/DBC/VNQ + SHY防御)
**数据**: 2012-01-03 ~ 2026-02-18 (14年)

### 策略对比

| 策略 | CAGR | MaxDD | Sharpe | Calmar | 胜率 | IS Sharpe | OOS Sharpe | WF Pass | Composite |
|------|------|-------|--------|--------|------|-----------|------------|---------|-----------|
| **Momentum v2** ⭐ | 11.69% | -21.17% | **0.63** | 0.55 | 61.8% | 0.39 | **0.96** | ✅ | **0.495** |
| Momentum v1 | 11.48% | -24.85% | 0.57 | 0.46 | 62.4% | 0.23 | **1.05** | ✅ | 0.435 |
| Momentum v3 | 8.40% | -12.70% | 0.47 | 0.66 | 61.8% | 0.34 | 0.61 | ✅ | 0.469 |
| SPY B&H | 14.22% | -23.92% | 0.74 | 0.59 | 69.4% | - | - | - | - |
| 60/40 | 8.80% | -20.74% | 0.54 | 0.42 | 69.4% | - | - | - | - |

### 策略说明
- **v1**: 等权 Top3 + 绝对动量过滤（负动量→SHY）
- **v2**: 风险平价(inverse vol) Top3 + 中期动量偏重(1M:0.2/3M:0.4/6M:0.3/12M:0.1) + 绝对动量过滤 ⭐
- **v3**: v2风格 + 短期动量偏重(0.4/0.3/0.2/0.1) + 波动率择时（高vol时降仓50%→SHY）
- 手续费 0.05%/边 + 滑点 0.1%，无风险利率 4%
- Walk-forward: 60% IS / 40% OOS，全部通过（OOS > IS）

### 关键发现
1. **Sharpe >1.0 在OOS期间达成** (v1 OOS=1.05, v2 OOS=0.96)，但全期因2013-2019动量低迷被拉低
2. **风险平价 > 等权**：v2 比 v1 MaxDD低4pp，Calmar更高
3. **波动率择时过度保守**：v3虽MaxDD最低(-12.7%)，但CAGR和Sharpe都大幅下降
4. **中期动量(3M)权重最重要**：比等权加权或长期偏重更好
5. **防过拟合验证通过**：所有版本OOS Sharpe均 > IS Sharpe（无退化）
6. **vs SPY B&H**：动量策略CAGR略低但MaxDD可控，Calmar相当；真正优势在熊市防御

---

## 带杠杆动量轮动 + 蒙特卡洛压力测试 (2026-02-19)

> 代码熊 🐻 | 基于 Momentum v2 (RP Top3 + 中期动量)

### Part 1: 杠杆对比

| 配置 | CAGR | MaxDD | Sharpe | Calmar |
|------|------|-------|--------|--------|
| 1.0x (baseline) | 11.69% | -21.17% | 0.63 | 0.55 |
| 1.5x (无融资) | 17.34% | -30.30% | 0.74 | 0.57 |
| 1.5x (融资5%) | 14.47% | -33.31% | 0.61 | 0.43 |
| 1.5x (融资+熔断) | 14.40% | -29.50% | 0.61 | 0.49 |
| 2.0x (无融资) | 22.80% | -38.70% | **0.79** | **0.59** |
| 2.0x (融资5%) | 16.88% | -44.20% | 0.59 | 0.38 |
| 2.0x (融资+熔断) | 14.95% | -37.11% | 0.56 | 0.40 |

**关键发现**：
- 融资成本显著侵蚀收益（1.5x: Sharpe 0.74→0.61，2x: 0.79→0.59）
- 回撤熔断有效降低MaxDD（2x: -44%→-37%），但也限制了反弹收益
- **最优杠杆**: 1.5x无融资 (Sharpe 0.74, Calmar 0.57)；考虑融资后杠杆优势大幅缩小

### Part 2: 蒙特卡洛压力测试 (1000路径 × 10年)

| 指标 | v2 1.0x | v2 1.5x (fin+CB) | v2 2.0x (fin+CB) |
|------|---------|-------------------|-------------------|
| Sharpe P5 | 0.103 | 0.096 | 0.039 |
| Sharpe P25 | 0.420 | 0.401 | 0.349 |
| **Sharpe P50** | **0.626** | **0.612** | **0.564** |
| Sharpe P75 | 0.856 | 0.840 | 0.802 |
| Sharpe P95 | 1.191 | 1.162 | 1.122 |
| MaxDD P50 | -17.0% | -25.6% | -33.1% |
| 正收益路径 | 99.5% | 98.5% | 97.5% |
| 中位终值($1) | $2.98 | $3.77 | $3.89 |

### 极端情景测试

| 情景 | 1.0x MaxDD | 1.5x MaxDD | 2.0x MaxDD | 1.0x恢复 |
|------|-----------|-----------|-----------|----------|
| A: 持续熊市(12月×-5%) | -43.1% | -58.6% | -70.2% | 未恢复 |
| B: 2008 GFC | -53.2% | -70.0% | -81.7% | 未恢复 |
| C: 2020 COVID | -25.0% | -37.7% | -50.4% | 3个月 |

### 结论
1. 杠杆在无融资假设下提升Sharpe，但真实融资成本(5%)几乎抵消杠杆收益
2. 蒙特卡洛确认v2策略在大多数路径下稳健（P5 Sharpe > 0，99.5%正收益）
3. 2x杠杆在极端情景下回撤>80%，不建议实盘使用
4. **建议**: 维持1x或最多1.5x（如融资成本可控）

### 文件
- `hedge/codebear/momentum_leveraged.py` — 杠杆回测
- `hedge/codebear/monte_carlo_stress.py` — 蒙特卡洛压力测试
- `hedge/codebear/mc_sharpe_dist.png` — Sharpe分布直方图


---

## 方向A探索：3x ETF策略（SOXL + 动量轮动）

> 日期：2026-02-19 (Round 2) | 代码熊 🐻

### Part 1: SOXL Beast v1 — 3x半导体趋势跟踪

移植 TQQQ v8 的核心逻辑到 SOXL（SMA200滞后带 + vol感知 + RSI抄底）

| 版本 | 参数 | CAGR | MaxDD | Sharpe | Calmar | IS Sharpe | OOS Sharpe | WF |
|------|------|------|-------|--------|--------|-----------|------------|-----|
| v1a (tqqq_clone) | 105/90/floor30 | 39.6% | -73.6% | 0.78 | 0.54 | 0.73 | 0.85 | ✅ |
| **v1b (wide)** ⭐ | 108/87/floor25 | **41.2%** | -71.0% | **0.80** | **0.58** | 0.74 | 0.88 | ✅ |
| v1c (narrow) | 103/93/floor35 | 38.4% | -73.7% | 0.77 | 0.52 | 0.70 | 0.85 | ✅ |
| v1d (high_floor) | 105/90/floor40 | 38.1% | -74.8% | 0.76 | 0.51 | 0.72 | 0.82 | ✅ |
| v1e (vwide) | 110/85/floor20 | 39.6% | -70.2% | 0.78 | 0.56 | 0.73 | 0.86 | ✅ |
| SOXL B&H | - | 34.1% | -90.5% | 0.73 | 0.38 | - | - | - |

**结论**: SOXL更宽的滞后带(108/87)效果最好，因为半导体波动更大。CAGR 41.2%接近TQQQ v8水平，但MaxDD更高(-71% vs -59%)。
**Composite Score**: 0.634（低于 TQQQ v8 的 0.728）

### Part 2: 3x ETF 纯动量轮动 (TQQQ/SOXL/UPRO)

在3个3x ETF间按混合动量(1M:25%/3M:40%/6M:35%)轮动，绝对动量过滤

| 版本 | CAGR | MaxDD | Sharpe | Calmar | OOS Sharpe | WF | Score |
|------|------|-------|--------|--------|------------|-----|-------|
| Top1 weekly | 20.0% | -70.6% | 0.54 | 0.28 | 0.63 | ✅ | - |
| Top1 monthly | 25.0% | -73.8% | 0.61 | 0.34 | 0.78 | ✅ | - |
| **Top2 RP weekly** | **28.8%** | **-59.8%** | **0.70** | **0.48** | **0.88** | ✅ | 0.530 |
| TQQQ B&H | 38.1% | -81.7% | 0.77 | 0.47 | - | - | 0.572 |

**问题**: 纯轮动全清仓时错过大量反弹，CAGR远低于B&H。

### Part 3: Beast Rotation v1 — 动量轮动 + Beast熊市底仓 ⭐⭐

**核心创新**: 将beast的regime逻辑(滞后带+RSI底仓)与轮动结合
- 牛市：70%最强3x + 30%第二强（动量择优）
- 熊市：保持30%底仓在最强ETF + RSI抄底至80%

| 版本 | CAGR | MaxDD | Sharpe | Calmar | IS Sh | OOS Sh | WF | Score |
|------|------|-------|--------|--------|-------|--------|-----|-------|
| **BeastRot base** ⭐ | **38.0%** | **-50.7%** | **0.80** | **0.75** | 0.79 | 0.83 | ✅ | **0.695** |
| BeastRot hfloor | 38.7% | -53.7% | 0.80 | 0.72 | 0.79 | 0.84 | ✅ | 0.687 |
| BeastRot narrow | 36.4% | -57.8% | 0.77 | 0.63 | 0.78 | 0.79 | ✅ | 0.634 |
| BeastRot wide | 34.9% | -54.7% | 0.76 | 0.64 | 0.74 | 0.79 | ✅ | 0.628 |
| TQQQ B&H | 38.1% | -81.7% | 0.77 | 0.47 | - | - | - | 0.572 |

### 🔑 关键发现

1. **Beast Rotation > 单个Beast策略**：MaxDD从-59%(TQQQ v8)降到-50.7%，Calmar从0.75提升，CAGR基本持平(38% vs 44%)
2. **轮动+底仓 >> 纯轮动**：纯轮动全清仓CAGR只有20-29%，加beast底仓后跳到38%
3. **SOXL独立策略不如TQQQ**：MaxDD更高(-71% vs -59%)，Calmar更低
4. **Walk-forward全部通过**：所有策略OOS Sharpe ≥ IS Sharpe × 0.7
5. **BeastRot是当前Calmar最高的杠杆策略**：0.75 vs TQQQ v8的0.75 vs SOXL的0.58

### Composite Score 排行榜

| 策略 | CAGR | MaxDD | Sharpe | Calmar | Composite |
|------|------|-------|--------|--------|-----------|
| TQQQ v8 Final ⭐ | 44.2% | -59.2% | 0.85 | 0.75 | 0.728 |
| **BeastRot base** ⭐ | 38.0% | -50.7% | 0.80 | 0.75 | **0.695** |
| SOXL v1b | 41.2% | -71.0% | 0.80 | 0.58 | 0.634 |
| BTC v5 | 61.0% | -74.0% | 0.83 | 0.82 | 0.782 |
| Momentum v2 (无杠杆) | 11.69% | -21.17% | 0.63 | 0.55 | 0.495 |
| Hedge v4 PMA | 10.1% | -17.0% | 0.66 | 0.59 | 0.523 |

### 下一步方向
1. **BeastRot v2**: 加入vol感知（高vol降仓），可能进一步降低MaxDD
2. **加入UPRO单独beast**: 更稳定的3x ETF，可能Calmar更好
3. **BeastRot + 防御资产**: 熊市部分配TLT/GLD而非纯现金

### 文件
- `leveraged_etf/codebear/soxl_beast_v1.py` — SOXL单品Beast
- `leveraged_etf/codebear/triple_rotation_v1.py` — 纯动量轮动
- `leveraged_etf/codebear/beast_rotation_v1.py` — **Beast Rotation 混合策略** ⭐
- `leveraged_etf/codebear/beast_rotation_v2.py` — Beast Rotation v2 波动率感知版

---

## Beast Rotation v2 — 波动率感知降仓 (2026-02-19)

### 优化思路

在 v1 基础上叠加 **20日滚动波动率分档降仓**：高波动环境下自动减少杠杆暴露。

关键发现：3x ETF 的年化波动率中位数约 49%，远高于普通股票。原始任务中的 20-40% 阈值几乎全程触发降仓。经过大量参数搜索，最终校准至 50%-115% 范围。

### 三个变种对比

| 版本 | CAGR | MaxDD | Sharpe | Calmar | IS Sh | OOS Sh | WF | Composite |
|------|------|-------|--------|--------|-------|--------|----|-----------|
| v1 base | 38.0% | -50.7% | 0.80 | 0.75 | 0.79 | 0.83 | ✅ | 0.695 |
| v2a 保守 | 36.1% | -49.1% | 0.78 | 0.73 | 0.77 | 0.81 | ✅ | 0.679 |
| v2b 平衡 | 34.7% | -47.1% | 0.77 | 0.74 | 0.77 | 0.80 | ✅ | 0.674 |
| v2c 动态 | 34.7% | -47.1% | 0.77 | 0.74 | 0.77 | 0.80 | ✅ | 0.674 |

### 结论

**v2 未能同时满足 CAGR >35% 且 MaxDD <-45% 的双重目标。**

- MaxDD 改善明显：v1 的 -50.7% → v2b/c 的 -47.1%（改善 3.6pp）
- 但 CAGR 也同步下降：38.0% → 34.7%（损失 3.3pp）
- Composite Score 均低于 v1（0.674 vs 0.695）
- Walk-forward 全部通过，无过拟合
- v2c 动态最低仓与 v2b 结果相同（RSI<30 在回测期内极少触发）

**根本原因**：v1 最大回撤来自 2020 COVID（-50.7%）和 2011 欧债危机（-49.2%）。波动率降仓可削减 COVID 回撤（vol 飙升快），但 2011 回撤起始 vol 仅 ~0.325，难以提前捕捉。

**建议**：保留 v1 作为最优。未来可探索 VIX 期限结构、跨资产相关性突变、均线斜率恶化等替代信号。

---
*Updated by 代码熊 🐻 — 2026-02-19*


---

## BTC v6 探索：2017+ 数据深度优化 (2026-02-20)

> 代码熊 🐻 | 所有回测严格从 2017-01-01 开始

### 背景
v5 Beast 原始 Composite 0.782（含 2013-2016 数据）。本轮在 2017+ 数据上重新验证并探索改进方向。

### 策略对比（2017-01-01 → 2026-02-18）

| 版本 | 最终价值 | CAGR | MaxDD | Sharpe | Calmar | IS Sh | OOS Sh | WF | Composite |
|------|----------|------|-------|--------|--------|-------|--------|----|-----------|
| v5 (2017+) | $774,007 | 61.0% | -74.0% | 1.04 | 0.82 | 1.33 | 0.33 | ❌ | 0.702 |
| v6a 多周期SMA | $863,027 | 62.9% | -70.0% | 1.09 | 0.90 | 1.41 | 0.30 | ❌ | 0.742 |
| **v6b 改进减半** ⭐ | **$807,680** | **61.8%** | **-59.8%** | **1.14** | **1.03** | 1.55 | 0.36 | ❌ | **0.786** |
| v6c vol自适应 | $425,121 | 50.8% | -55.8% | 1.05 | 0.91 | 1.37 | 0.34 | ❌ | 0.704 |
| BTC Buy & Hold | ~$666,842 | ~58.4% | -83.2% | ~0.77 | ~0.70 | - | - | - | - |

### Walk-Forward 说明
IS: 2017-2021, OOS: 2022-2026。所有策略 OOS Sharpe (0.30-0.36) 远低于 IS (1.33-1.55)。
**这是结构性的**，不是过拟合：2017-2021 包含两轮大牛市（2017 和 2020-2021），而 2022-2026 包含 2022 年 -75% 熊市。BTC 的 4 年周期导致 IS/OOS 天然不对称。

### v6b 核心创新

**用减半后累计涨幅替代硬编码月数判断周期阶段：**

| 减半后涨幅 | 周期阶段 | 牛市上限 | 熊市底仓 |
|-----------|---------|---------|---------|
| <100% | 早期牛市 | 100% | **52%** (激进) |
| 100-300% | 中期牛市 | 100% | 35% |
| 300-500% | 晚期牛市 | **70%** | 25% |
| >500% | 极晚期 | **50%** | 25% |

**为什么更好**：
- 2021 年 BTC 从减半价 $8,700 涨到 $69,000 (693%)，v6b 在 300%+ 时自动降仓至 70%，避免了大部分 2022 崩盘
- v5 用固定 "30 月后减仓" 无法适应不同周期速度
- MaxDD 从 -74.0% 改善至 -59.8%（改善 14pp！）

### 各方向总结

**方向 A (On-Chain)**: 跳过，链上数据无法通过 CSV 获取
**方向 B (多周期SMA)**: v6a 小幅改善（MaxDD -70% vs -74%），但不如 v6b
**方向 C (改进减半)**: ⭐ v6b 最优，MaxDD 大幅改善，Calmar 突破 1.0
**方向 D (Vol自适应)**: v6c 过于保守，CAGR 损失 10pp，不推荐

### 文件
- `btc/codebear/beast_v6a.py` — 多周期 SMA 组合
- `btc/codebear/beast_v6b.py` — **改进减半周期（最优）** ⭐
- `btc/codebear/beast_v6c.py` — 波动率自适应
- `btc/codebear/run_v6_comparison.py` — 对比脚本

---
*Updated by 代码熊 🐻 — 2026-02-20*
